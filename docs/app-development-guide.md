# BG-WebMacOS åº”ç”¨å¼€å‘æŒ‡å—

æœ¬æŒ‡å—å°†å¸®åŠ©ç¬¬ä¸‰æ–¹å¼€å‘è€…ä¸º BG-WebMacOS å¹³å°å¼€å‘å’Œéƒ¨ç½²åº”ç”¨ç¨‹åºã€‚

## ğŸ“‹ ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [å¼€å‘ç¯å¢ƒå‡†å¤‡](#å¼€å‘ç¯å¢ƒå‡†å¤‡)
3. [åº”ç”¨æ¶æ„](#åº”ç”¨æ¶æ„)
4. [åº”ç”¨æ¸…å•](#åº”ç”¨æ¸…å•)
5. [æ ¸å¿ƒ API](#æ ¸å¿ƒ-api)
6. [ç»„ä»¶å¼€å‘](#ç»„ä»¶å¼€å‘)
7. [ç”Ÿå‘½å‘¨æœŸç®¡ç†](#ç”Ÿå‘½å‘¨æœŸç®¡ç†)
8. [æƒé™ç³»ç»Ÿ](#æƒé™ç³»ç»Ÿ)
9. [æ•°æ®å­˜å‚¨](#æ•°æ®å­˜å‚¨)
10. [åº”ç”¨æ‰“åŒ…](#åº”ç”¨æ‰“åŒ…)
11. [åº”ç”¨å•†åº—å‘å¸ƒ](#åº”ç”¨å•†åº—å‘å¸ƒ)
12. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
13. [ç¤ºä¾‹åº”ç”¨](#ç¤ºä¾‹åº”ç”¨)
14. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

## ğŸ¯ æ¦‚è¿°

BG-WebMacOS æ˜¯ä¸€ä¸ªåŸºäº Web æŠ€æœ¯çš„æ¡Œé¢æ“ä½œç³»ç»Ÿæ¨¡æ‹Ÿå™¨ï¼Œæ”¯æŒç¬¬ä¸‰æ–¹åº”ç”¨çš„å¼€å‘å’Œéƒ¨ç½²ã€‚å¼€å‘è€…å¯ä»¥ä½¿ç”¨ Vue.jsã€React æˆ–åŸç”Ÿ JavaScript å¼€å‘åº”ç”¨ï¼Œå¹¶é€šè¿‡åº”ç”¨å•†åº—æˆ–æ‰‹åŠ¨å®‰è£…çš„æ–¹å¼éƒ¨ç½²åˆ°ç³»ç»Ÿä¸­ã€‚

### æ ¸å¿ƒç‰¹æ€§

- **æ¡†æ¶æ— å…³**ï¼šæ”¯æŒ Vue.jsã€Reactã€åŸç”Ÿ JavaScript ç­‰
- **æ²™ç®±éš”ç¦»**ï¼šåº”ç”¨è¿è¡Œåœ¨ç‹¬ç«‹çš„æ²™ç®±ç¯å¢ƒä¸­
- **æƒé™ç®¡ç†**ï¼šç»†ç²’åº¦çš„æƒé™æ§åˆ¶ç³»ç»Ÿ
- **ç”Ÿå‘½å‘¨æœŸ**ï¼šå®Œæ•´çš„åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **API ä¸°å¯Œ**ï¼šæä¾›ç³»ç»Ÿçº§ API å’Œå·¥å…·å‡½æ•°
- **çƒ­æ›´æ–°**ï¼šæ”¯æŒåº”ç”¨çš„çƒ­æ›´æ–°å’Œç‰ˆæœ¬ç®¡ç†

### æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**ï¼šVue 3 + TypeScript
- **æ„å»ºå·¥å…·**ï¼šVite
- **çŠ¶æ€ç®¡ç†**ï¼šPinia
- **è·¯ç”±ç®¡ç†**ï¼šVue Router
- **UI ç»„ä»¶**ï¼šElement Plus
- **åŒ…ç®¡ç†**ï¼šnpm/yarn/pnpm

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒå‡†å¤‡

### ç³»ç»Ÿè¦æ±‚

- Node.js >= 16.0.0
- npm >= 8.0.0 æˆ– yarn >= 1.22.0
- Git >= 2.0.0
- ç°ä»£æµè§ˆå™¨ï¼ˆChrome 90+ã€Firefox 88+ã€Safari 14+ï¼‰

### å¼€å‘å·¥å…·æ¨è

- **IDE**ï¼šVS Codeã€WebStorm
- **æ’ä»¶**ï¼šVue Language Features (Volar)ã€TypeScript Hero
- **è°ƒè¯•**ï¼šVue DevToolsã€Chrome DevTools
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šGitã€GitHub Desktop

### é¡¹ç›®åˆå§‹åŒ–

```bash
# åˆ›å»ºæ–°åº”ç”¨é¡¹ç›®
mkdir my-bg-app
cd my-bg-app

# åˆå§‹åŒ– package.json
npm init -y

# å®‰è£…ä¾èµ–
npm install vue@^3.3.0
npm install -D @vitejs/plugin-vue vite typescript

# åˆ›å»ºåŸºç¡€æ–‡ä»¶ç»“æ„
mkdir src assets scripts
touch src/App.vue app.manifest.json
```

## ğŸ—ï¸ åº”ç”¨æ¶æ„

### æ–‡ä»¶ç»“æ„

```
my-app/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ App.vue            # ä¸»ç»„ä»¶ï¼ˆå¿…éœ€ï¼‰
â”‚   â”œâ”€â”€ components/        # å­ç»„ä»¶
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ stores/           # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ types/            # ç±»å‹å®šä¹‰
â”œâ”€â”€ assets/               # é™æ€èµ„æº
â”‚   â”œâ”€â”€ icon.svg          # åº”ç”¨å›¾æ ‡ï¼ˆå¿…éœ€ï¼‰
â”‚   â”œâ”€â”€ screenshots/      # åº”ç”¨æˆªå›¾
â”‚   â””â”€â”€ images/          # å…¶ä»–å›¾ç‰‡
â”œâ”€â”€ scripts/              # ç”Ÿå‘½å‘¨æœŸè„šæœ¬
â”‚   â”œâ”€â”€ install.js        # å®‰è£…è„šæœ¬
â”‚   â”œâ”€â”€ uninstall.js      # å¸è½½è„šæœ¬
â”‚   â””â”€â”€ update.js         # æ›´æ–°è„šæœ¬
â”œâ”€â”€ app.manifest.json     # åº”ç”¨æ¸…å•ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ package.json          # é¡¹ç›®é…ç½®
â”œâ”€â”€ README.md            # è¯´æ˜æ–‡æ¡£
â””â”€â”€ LICENSE              # è®¸å¯è¯
```

### æ ¸å¿ƒæ¦‚å¿µ

#### 1. åº”ç”¨å®¹å™¨
æ¯ä¸ªåº”ç”¨è¿è¡Œåœ¨ç‹¬ç«‹çš„å®¹å™¨ä¸­ï¼Œæ‹¥æœ‰è‡ªå·±çš„ï¼š
- çª—å£å®ä¾‹
- çŠ¶æ€ç®¡ç†
- äº‹ä»¶ç³»ç»Ÿ
- å­˜å‚¨ç©ºé—´

#### 2. æ²™ç®±éš”ç¦»
åº”ç”¨ä¹‹é—´é€šè¿‡æ²™ç®±æœºåˆ¶éš”ç¦»ï¼š
- ç‹¬ç«‹çš„ JavaScript æ‰§è¡Œç¯å¢ƒ
- å—é™çš„ DOM è®¿é—®æƒé™
- å®‰å…¨çš„ API è°ƒç”¨æœºåˆ¶

#### 3. é€šä¿¡æœºåˆ¶
åº”ç”¨ä¸ç³»ç»Ÿçš„é€šä¿¡æ–¹å¼ï¼š
- SDK API è°ƒç”¨
- äº‹ä»¶ç›‘å¬å’Œè§¦å‘
- æ¶ˆæ¯ä¼ é€’æœºåˆ¶

## ğŸ“„ åº”ç”¨æ¸…å•

`app.manifest.json` æ˜¯åº”ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰äº†åº”ç”¨çš„åŸºæœ¬ä¿¡æ¯ã€æƒé™ã€ä¾èµ–ç­‰ã€‚

### åŸºç¡€ç»“æ„

```json
{
  "name": "my-awesome-app",
  "version": "1.0.0",
  "displayName": "My Awesome App",
  "description": "An awesome application for BG-WebMacOS",
  "author": {
    "name": "Developer Name",
    "email": "developer@example.com",
    "url": "https://example.com"
  },
  "main": "src/App.vue",
  "icon": "assets/icon.svg",
  "category": "utilities",
  "tags": ["productivity", "tools"],
  "window": {
    "width": 800,
    "height": 600,
    "minWidth": 400,
    "minHeight": 300,
    "resizable": true,
    "maximizable": true,
    "minimizable": true
  },
  "permissions": [
    "storage",
    "clipboard",
    "notifications"
  ],
  "dependencies": {
    "vue": "^3.3.0"
  },
  "engine": {
    "bgWebMacOS": ">=1.0.0",
    "node": ">=16.0.0"
  },
  "lifecycle": {
    "install": "scripts/install.js",
    "uninstall": "scripts/uninstall.js",
    "update": "scripts/update.js"
  }
}
```

### å­—æ®µè¯´æ˜

#### åŸºæœ¬ä¿¡æ¯
- `name`ï¼šåº”ç”¨å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆå¿…éœ€ï¼‰
- `version`ï¼šåº”ç”¨ç‰ˆæœ¬å·ï¼ˆå¿…éœ€ï¼‰
- `displayName`ï¼šæ˜¾ç¤ºåç§°
- `description`ï¼šåº”ç”¨æè¿°
- `author`ï¼šä½œè€…ä¿¡æ¯
- `main`ï¼šä¸»å…¥å£æ–‡ä»¶ï¼ˆå¿…éœ€ï¼‰
- `icon`ï¼šåº”ç”¨å›¾æ ‡è·¯å¾„ï¼ˆå¿…éœ€ï¼‰

#### åˆ†ç±»å’Œæ ‡ç­¾
- `category`ï¼šåº”ç”¨åˆ†ç±»ï¼ˆutilitiesã€gamesã€productivityã€entertainmentã€educationã€developer-toolsï¼‰
- `tags`ï¼šåº”ç”¨æ ‡ç­¾æ•°ç»„

#### çª—å£é…ç½®
- `window.width/height`ï¼šé»˜è®¤çª—å£å°ºå¯¸
- `window.minWidth/minHeight`ï¼šæœ€å°çª—å£å°ºå¯¸
- `window.maxWidth/maxHeight`ï¼šæœ€å¤§çª—å£å°ºå¯¸
- `window.resizable`ï¼šæ˜¯å¦å¯è°ƒæ•´å¤§å°
- `window.maximizable`ï¼šæ˜¯å¦å¯æœ€å¤§åŒ–
- `window.minimizable`ï¼šæ˜¯å¦å¯æœ€å°åŒ–

#### æƒé™ç³»ç»Ÿ
- `storage`ï¼šæœ¬åœ°å­˜å‚¨æƒé™
- `clipboard`ï¼šå‰ªè´´æ¿æƒé™
- `notifications`ï¼šé€šçŸ¥æƒé™
- `filesystem`ï¼šæ–‡ä»¶ç³»ç»Ÿæƒé™
- `network`ï¼šç½‘ç»œè®¿é—®æƒé™
- `camera`ï¼šæ‘„åƒå¤´æƒé™
- `microphone`ï¼šéº¦å…‹é£æƒé™

## ğŸ”§ æ ¸å¿ƒ API

### App SDK

åº”ç”¨å¯ä»¥é€šè¿‡ SDK è®¿é—®ç³»ç»ŸåŠŸèƒ½ï¼š

```typescript
import { useAppSDK } from '@/sdk'

const sdk = useAppSDK()

// ç³»ç»Ÿ API
const systemInfo = await sdk.system.getInfo()
await sdk.system.showNotification({
  title: 'Hello',
  message: 'World',
  type: 'success'
})

// çª—å£ API
const window = sdk.window
window.setTitle('New Title')
window.setSize(800, 600)
window.center()
window.minimize()
window.maximize()
window.close()

// å­˜å‚¨ API
const storage = sdk.storage
await storage.setItem('key', 'value')
const value = await storage.getItem('key')
await storage.removeItem('key')
await storage.clear()

// å‰ªè´´æ¿ API
const clipboard = sdk.clipboard
await clipboard.writeText('Hello World')
const text = await clipboard.readText()

// æ–‡ä»¶ç³»ç»Ÿ APIï¼ˆéœ€è¦æƒé™ï¼‰
const fs = sdk.filesystem
const files = await fs.readDirectory('/path')
const content = await fs.readFile('/path/file.txt')
await fs.writeFile('/path/file.txt', 'content')

// ç½‘ç»œ APIï¼ˆéœ€è¦æƒé™ï¼‰
const http = sdk.http
const response = await http.get('https://api.example.com/data')
const result = await http.post('https://api.example.com/submit', data)
```

### äº‹ä»¶ç³»ç»Ÿ

```typescript
// ç›‘å¬ç³»ç»Ÿäº‹ä»¶
sdk.events.on('window:resize', (event) => {
  console.log('Window resized:', event.width, event.height)
})

sdk.events.on('app:focus', () => {
  console.log('App gained focus')
})

sdk.events.on('app:blur', () => {
  console.log('App lost focus')
})

// è§¦å‘è‡ªå®šä¹‰äº‹ä»¶
sdk.events.emit('custom:event', { data: 'value' })

// ç§»é™¤äº‹ä»¶ç›‘å¬
sdk.events.off('window:resize', handler)
```

### ç”Ÿå‘½å‘¨æœŸé’©å­

```typescript
import { onMounted, onUnmounted } from 'vue'

export default {
  setup() {
    // åº”ç”¨å¯åŠ¨æ—¶
    onMounted(async () => {
      await sdk.system.showNotification({
        title: 'App Started',
        message: 'Welcome to My App!'
      })
    })
    
    // åº”ç”¨å…³é—­æ—¶
    onUnmounted(async () => {
      // ä¿å­˜æ•°æ®
      await sdk.storage.setItem('lastSession', Date.now())
    })
    
    return {}
  }
}
```

## ğŸ§© ç»„ä»¶å¼€å‘

### Vue 3 ç»„ä»¶ç¤ºä¾‹

```vue
<template>
  <div class="my-app">
    <header class="app-header">
      <h1>{{ title }}</h1>
      <button @click="toggleTheme">åˆ‡æ¢ä¸»é¢˜</button>
    </header>
    
    <main class="app-content">
      <div class="feature-list">
        <div 
          v-for="feature in features" 
          :key="feature.id"
          class="feature-item"
          @click="selectFeature(feature)"
        >
          <icon :name="feature.icon" />
          <span>{{ feature.name }}</span>
        </div>
      </div>
      
      <div class="content-area">
        <component 
          :is="currentComponent" 
          :data="currentData"
          @update="handleUpdate"
        />
      </div>
    </main>
    
    <footer class="app-footer">
      <span>{{ status }}</span>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue'
import { useAppSDK } from '@/sdk'
import Icon from './components/Icon.vue'

// ç±»å‹å®šä¹‰
interface Feature {
  id: string
  name: string
  icon: string
  component: string
}

// å“åº”å¼æ•°æ®
const sdk = useAppSDK()
const title = ref('My Awesome App')
const isDarkTheme = ref(false)
const features = ref<Feature[]>([])
const selectedFeature = ref<Feature | null>(null)
const status = ref('Ready')

// è®¡ç®—å±æ€§
const currentComponent = computed(() => {
  return selectedFeature.value?.component || 'DefaultView'
})

const currentData = computed(() => {
  return selectedFeature.value || {}
})

// æ–¹æ³•
const toggleTheme = async () => {
  isDarkTheme.value = !isDarkTheme.value
  await sdk.storage.setItem('theme', isDarkTheme.value ? 'dark' : 'light')
  
  // åº”ç”¨ä¸»é¢˜
  document.documentElement.setAttribute(
    'data-theme', 
    isDarkTheme.value ? 'dark' : 'light'
  )
}

const selectFeature = (feature: Feature) => {
  selectedFeature.value = feature
  status.value = `Selected: ${feature.name}`
}

const handleUpdate = (data: any) => {
  console.log('Data updated:', data)
  status.value = 'Data updated'
}

// ç”Ÿå‘½å‘¨æœŸ
onMounted(async () => {
  // åŠ è½½ä¿å­˜çš„ä¸»é¢˜
  const savedTheme = await sdk.storage.getItem('theme')
  isDarkTheme.value = savedTheme === 'dark'
  
  // åŠ è½½åŠŸèƒ½åˆ—è¡¨
  features.value = [
    { id: '1', name: 'åŠŸèƒ½ä¸€', icon: 'feature1', component: 'Feature1' },
    { id: '2', name: 'åŠŸèƒ½äºŒ', icon: 'feature2', component: 'Feature2' },
    { id: '3', name: 'åŠŸèƒ½ä¸‰', icon: 'feature3', component: 'Feature3' }
  ]
  
  // è®¾ç½®çª—å£æ ‡é¢˜
  sdk.window.setTitle(title.value)
  
  status.value = 'App loaded successfully'
})
</script>

<style scoped>
.my-app {
  display: flex;
  flex-direction: column;
  height: 100vh;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.app-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem;
  background: var(--bg-primary);
  border-bottom: 1px solid var(--border-color);
}

.app-content {
  display: flex;
  flex: 1;
  overflow: hidden;
}

.feature-list {
  width: 200px;
  background: var(--bg-secondary);
  border-right: 1px solid var(--border-color);
  overflow-y: auto;
}

.feature-item {
  display: flex;
  align-items: center;
  padding: 0.75rem 1rem;
  cursor: pointer;
  transition: background-color 0.2s;
}

.feature-item:hover {
  background: var(--bg-hover);
}

.content-area {
  flex: 1;
  padding: 1rem;
  overflow-y: auto;
}

.app-footer {
  padding: 0.5rem 1rem;
  background: var(--bg-secondary);
  border-top: 1px solid var(--border-color);
  font-size: 0.875rem;
  color: var(--text-secondary);
}

/* ä¸»é¢˜å˜é‡ */
:root {
  --bg-primary: #ffffff;
  --bg-secondary: #f5f5f5;
  --bg-hover: #e5e5e5;
  --text-primary: #333333;
  --text-secondary: #666666;
  --border-color: #d1d5db;
}

[data-theme="dark"] {
  --bg-primary: #1f2937;
  --bg-secondary: #374151;
  --bg-hover: #4b5563;
  --text-primary: #f9fafb;
  --text-secondary: #d1d5db;
  --border-color: #4b5563;
}
</style>
```

### React ç»„ä»¶ç¤ºä¾‹

```jsx
import React, { useState, useEffect } from 'react'
import { useAppSDK } from '@/sdk'

function MyApp() {
  const sdk = useAppSDK()
  const [title, setTitle] = useState('My React App')
  const [data, setData] = useState([])
  const [loading, setLoading] = useState(true)
  
  useEffect(() => {
    const initApp = async () => {
      try {
        // è®¾ç½®çª—å£æ ‡é¢˜
        sdk.window.setTitle(title)
        
        // åŠ è½½æ•°æ®
        const savedData = await sdk.storage.getItem('app-data')
        if (savedData) {
          setData(JSON.parse(savedData))
        }
        
        setLoading(false)
      } catch (error) {
        console.error('Failed to initialize app:', error)
        setLoading(false)
      }
    }
    
    initApp()
  }, [])
  
  const saveData = async (newData) => {
    setData(newData)
    await sdk.storage.setItem('app-data', JSON.stringify(newData))
  }
  
  if (loading) {
    return <div className="loading">Loading...</div>
  }
  
  return (
    <div className="app">
      <header>
        <h1>{title}</h1>
      </header>
      <main>
        {/* åº”ç”¨å†…å®¹ */}
      </main>
    </div>
  )
}

export default MyApp
```

## ğŸ”„ ç”Ÿå‘½å‘¨æœŸç®¡ç†

### å®‰è£…è„šæœ¬ (install.js)

```javascript
// scripts/install.js
const { AppInstaller } = require('@bg-webmacos/installer')

class MyAppInstaller extends AppInstaller {
  async onInstall() {
    console.log('Installing My App...')
    
    // åˆ›å»ºåº”ç”¨æ•°æ®ç›®å½•
    await this.createDirectory('data')
    await this.createDirectory('cache')
    await this.createDirectory('logs')
    
    // åˆå§‹åŒ–é…ç½®æ–‡ä»¶
    const defaultConfig = {
      theme: 'light',
      language: 'zh-CN',
      autoSave: true,
      notifications: true
    }
    
    await this.writeFile('data/config.json', JSON.stringify(defaultConfig, null, 2))
    
    // è®¾ç½®é»˜è®¤æƒé™
    await this.requestPermissions([
      'storage',
      'clipboard',
      'notifications'
    ])
    
    // æ³¨å†Œå¿«æ·é”®
    await this.registerShortcut('Ctrl+Alt+M', 'open-my-app')
    
    // åˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼
    await this.createDesktopShortcut({
      name: 'My App',
      icon: 'assets/icon.svg',
      description: 'Launch My Awesome App'
    })
    
    console.log('My App installed successfully!')
    
    // æ˜¾ç¤ºå®‰è£…å®Œæˆé€šçŸ¥
    await this.showNotification({
      title: 'Installation Complete',
      message: 'My App has been installed successfully!',
      type: 'success'
    })
  }
  
  async onPostInstall() {
    // å®‰è£…åçš„é¢å¤–æ“ä½œ
    console.log('Post-install tasks...')
    
    // æ£€æŸ¥ä¾èµ–
    await this.checkDependencies()
    
    // åˆå§‹åŒ–æ•°æ®åº“
    await this.initializeDatabase()
  }
  
  async checkDependencies() {
    const requiredApps = ['system-calculator', 'system-notepad']
    
    for (const app of requiredApps) {
      const isInstalled = await this.isAppInstalled(app)
      if (!isInstalled) {
        console.warn(`Recommended app not found: ${app}`)
      }
    }
  }
  
  async initializeDatabase() {
    // åˆå§‹åŒ–æœ¬åœ°æ•°æ®åº“
    const db = await this.openDatabase('my-app-db', 1)
    
    // åˆ›å»ºè¡¨ç»“æ„
    await db.createTable('users', {
      id: 'INTEGER PRIMARY KEY',
      name: 'TEXT NOT NULL',
      email: 'TEXT UNIQUE',
      created_at: 'DATETIME DEFAULT CURRENT_TIMESTAMP'
    })
    
    await db.createTable('settings', {
      key: 'TEXT PRIMARY KEY',
      value: 'TEXT',
      updated_at: 'DATETIME DEFAULT CURRENT_TIMESTAMP'
    })
  }
}

module.exports = MyAppInstaller
```

### å¸è½½è„šæœ¬ (uninstall.js)

```javascript
// scripts/uninstall.js
const { AppUninstaller } = require('@bg-webmacos/installer')

class MyAppUninstaller extends AppUninstaller {
  async onUninstall() {
    console.log('Uninstalling My App...')
    
    // è¯¢é—®ç”¨æˆ·æ˜¯å¦ä¿ç•™æ•°æ®
    const keepData = await this.confirm({
      title: 'Uninstall My App',
      message: 'Do you want to keep your app data?',
      buttons: ['Keep Data', 'Remove All', 'Cancel']
    })
    
    if (keepData === 'Cancel') {
      throw new Error('Uninstall cancelled by user')
    }
    
    // å¤‡ä»½ç”¨æˆ·æ•°æ®ï¼ˆå¦‚æœé€‰æ‹©ä¿ç•™ï¼‰
    if (keepData === 'Keep Data') {
      await this.backupUserData()
    }
    
    // æ³¨é”€å¿«æ·é”®
    await this.unregisterShortcut('Ctrl+Alt+M')
    
    // ç§»é™¤æ¡Œé¢å¿«æ·æ–¹å¼
    await this.removeDesktopShortcut('My App')
    
    // æ¸…ç†åº”ç”¨æ•°æ®ï¼ˆå¦‚æœé€‰æ‹©åˆ é™¤ï¼‰
    if (keepData === 'Remove All') {
      await this.removeDirectory('data')
      await this.removeDirectory('cache')
      await this.removeDirectory('logs')
    } else {
      // åªæ¸…ç†ç¼“å­˜å’Œæ—¥å¿—
      await this.removeDirectory('cache')
      await this.removeDirectory('logs')
    }
    
    // æ¸…ç†æ³¨å†Œè¡¨é¡¹
    await this.cleanupRegistry()
    
    console.log('My App uninstalled successfully!')
    
    // æ˜¾ç¤ºå¸è½½å®Œæˆé€šçŸ¥
    await this.showNotification({
      title: 'Uninstall Complete',
      message: 'My App has been uninstalled.',
      type: 'info'
    })
  }
  
  async backupUserData() {
    const backupPath = `backups/my-app-${Date.now()}`
    await this.createDirectory(backupPath)
    
    // å¤‡ä»½é…ç½®æ–‡ä»¶
    await this.copyFile('data/config.json', `${backupPath}/config.json`)
    
    // å¤‡ä»½æ•°æ®åº“
    await this.copyFile('data/database.db', `${backupPath}/database.db`)
    
    console.log(`User data backed up to: ${backupPath}`)
  }
  
  async cleanupRegistry() {
    // æ¸…ç†ç³»ç»Ÿæ³¨å†Œè¡¨ä¸­çš„åº”ç”¨ä¿¡æ¯
    await this.removeRegistryKey('apps/my-app')
    await this.removeRegistryKey('shortcuts/my-app')
    await this.removeRegistryKey('permissions/my-app')
  }
}

module.exports = MyAppUninstaller
```

### æ›´æ–°è„šæœ¬ (update.js)

```javascript
// scripts/update.js
const { AppUpdater } = require('@bg-webmacos/installer')

class MyAppUpdater extends AppUpdater {
  async onUpdate(fromVersion, toVersion) {
    console.log(`Updating My App from ${fromVersion} to ${toVersion}...`)
    
    // å¤‡ä»½å½“å‰æ•°æ®
    await this.backupCurrentData()
    
    // æ‰§è¡Œç‰ˆæœ¬ç‰¹å®šçš„æ›´æ–°é€»è¾‘
    if (this.isVersionLessThan(fromVersion, '1.1.0')) {
      await this.updateTo110()
    }
    
    if (this.isVersionLessThan(fromVersion, '1.2.0')) {
      await this.updateTo120()
    }
    
    if (this.isVersionLessThan(fromVersion, '2.0.0')) {
      await this.updateTo200()
    }
    
    // æ›´æ–°é…ç½®æ–‡ä»¶
    await this.updateConfig()
    
    // è¿ç§»æ•°æ®
    await this.migrateData(fromVersion, toVersion)
    
    console.log('Update completed successfully!')
    
    // æ˜¾ç¤ºæ›´æ–°å®Œæˆé€šçŸ¥
    await this.showNotification({
      title: 'Update Complete',
      message: `My App has been updated to version ${toVersion}`,
      type: 'success'
    })
  }
  
  async updateTo110() {
    console.log('Applying updates for version 1.1.0...')
    
    // æ·»åŠ æ–°çš„é…ç½®é€‰é¡¹
    const config = await this.readJsonFile('data/config.json')
    config.newFeature = true
    config.enhancedUI = 'enabled'
    await this.writeJsonFile('data/config.json', config)
    
    // åˆ›å»ºæ–°çš„æ•°æ®ç›®å½•
    await this.createDirectory('data/plugins')
  }
  
  async updateTo120() {
    console.log('Applying updates for version 1.2.0...')
    
    // æ•°æ®åº“æ¶æ„æ›´æ–°
    const db = await this.openDatabase('my-app-db', 2)
    await db.addColumn('users', 'avatar', 'TEXT')
    await db.addColumn('users', 'preferences', 'TEXT')
  }
  
  async updateTo200() {
    console.log('Applying updates for version 2.0.0...')
    
    // é‡å¤§ç‰ˆæœ¬æ›´æ–° - é‡æ„æ•°æ®ç»“æ„
    await this.migrateToNewDataStructure()
    
    // æ›´æ–°æƒé™
    await this.requestPermissions(['filesystem', 'network'])
  }
  
  async migrateData(fromVersion, toVersion) {
    console.log('Migrating user data...')
    
    // è¯»å–æ—§æ•°æ®
    const oldData = await this.readJsonFile('data/user-data.json')
    
    // è½¬æ¢æ•°æ®æ ¼å¼
    const newData = this.transformDataStructure(oldData, fromVersion, toVersion)
    
    // ä¿å­˜æ–°æ•°æ®
    await this.writeJsonFile('data/user-data.json', newData)
  }
  
  transformDataStructure(data, fromVersion, toVersion) {
    // æ ¹æ®ç‰ˆæœ¬å·®å¼‚è½¬æ¢æ•°æ®ç»“æ„
    let transformed = { ...data }
    
    if (this.isVersionLessThan(fromVersion, '2.0.0')) {
      // 1.x -> 2.0 çš„æ•°æ®è½¬æ¢
      transformed = {
        version: toVersion,
        user: {
          profile: data.userProfile || {},
          settings: data.userSettings || {},
          preferences: data.preferences || {}
        },
        app: {
          data: data.appData || {},
          cache: data.cache || {},
          history: data.history || []
        }
      }
    }
    
    return transformed
  }
}

module.exports = MyAppUpdater
```

## ğŸ” æƒé™ç³»ç»Ÿ

### æƒé™ç±»å‹

```typescript
// æƒé™å®šä¹‰
interface Permission {
  name: string
  description: string
  required: boolean
  dangerous: boolean
}

const PERMISSIONS: Record<string, Permission> = {
  storage: {
    name: 'storage',
    description: 'è®¿é—®æœ¬åœ°å­˜å‚¨',
    required: false,
    dangerous: false
  },
  clipboard: {
    name: 'clipboard',
    description: 'è®¿é—®å‰ªè´´æ¿',
    required: false,
    dangerous: false
  },
  notifications: {
    name: 'notifications',
    description: 'æ˜¾ç¤ºç³»ç»Ÿé€šçŸ¥',
    required: false,
    dangerous: false
  },
  filesystem: {
    name: 'filesystem',
    description: 'è®¿é—®æ–‡ä»¶ç³»ç»Ÿ',
    required: false,
    dangerous: true
  },
  network: {
    name: 'network',
    description: 'è®¿é—®ç½‘ç»œ',
    required: false,
    dangerous: true
  },
  camera: {
    name: 'camera',
    description: 'è®¿é—®æ‘„åƒå¤´',
    required: false,
    dangerous: true
  },
  microphone: {
    name: 'microphone',
    description: 'è®¿é—®éº¦å…‹é£',
    required: false,
    dangerous: true
  }
}
```

### æƒé™è¯·æ±‚

```typescript
// åœ¨åº”ç”¨ä¸­è¯·æ±‚æƒé™
const requestPermissions = async () => {
  try {
    const permissions = await sdk.permissions.request([
      'storage',
      'clipboard',
      'notifications'
    ])
    
    console.log('Granted permissions:', permissions.granted)
    console.log('Denied permissions:', permissions.denied)
    
    if (permissions.denied.length > 0) {
      // å¤„ç†è¢«æ‹’ç»çš„æƒé™
      await handleDeniedPermissions(permissions.denied)
    }
  } catch (error) {
    console.error('Permission request failed:', error)
  }
}

const handleDeniedPermissions = async (deniedPermissions: string[]) => {
  for (const permission of deniedPermissions) {
    switch (permission) {
      case 'storage':
        // ç¦ç”¨éœ€è¦å­˜å‚¨çš„åŠŸèƒ½
        disableStorageFeatures()
        break
      case 'clipboard':
        // ç¦ç”¨å‰ªè´´æ¿åŠŸèƒ½
        disableClipboardFeatures()
        break
      case 'notifications':
        // ä½¿ç”¨åº”ç”¨å†…é€šçŸ¥æ›¿ä»£
        useInAppNotifications()
        break
    }
  }
}
```

### æƒé™æ£€æŸ¥

```typescript
// æ£€æŸ¥æƒé™çŠ¶æ€
const checkPermissions = async () => {
  const hasStorage = await sdk.permissions.check('storage')
  const hasClipboard = await sdk.permissions.check('clipboard')
  
  if (hasStorage) {
    // å¯ç”¨å­˜å‚¨åŠŸèƒ½
    enableStorageFeatures()
  }
  
  if (hasClipboard) {
    // å¯ç”¨å‰ªè´´æ¿åŠŸèƒ½
    enableClipboardFeatures()
  }
}
```

## ğŸ’¾ æ•°æ®å­˜å‚¨

### æœ¬åœ°å­˜å‚¨

```typescript
// åŸºç¡€å­˜å‚¨æ“ä½œ
const storage = sdk.storage

// å­˜å‚¨æ•°æ®
await storage.setItem('user-preferences', {
  theme: 'dark',
  language: 'zh-CN',
  autoSave: true
})

// è¯»å–æ•°æ®
const preferences = await storage.getItem('user-preferences')

// åˆ é™¤æ•°æ®
await storage.removeItem('user-preferences')

// æ¸…ç©ºæ‰€æœ‰æ•°æ®
await storage.clear()

// è·å–æ‰€æœ‰é”®
const keys = await storage.keys()

// è·å–å­˜å‚¨å¤§å°
const size = await storage.size()
```

### æ•°æ®åº“å­˜å‚¨

```typescript
// ä½¿ç”¨ IndexedDB
const db = await sdk.database.open('my-app-db', 1, {
  upgrade(db, oldVersion, newVersion) {
    // åˆ›å»ºå¯¹è±¡å­˜å‚¨
    const userStore = db.createObjectStore('users', { keyPath: 'id' })
    userStore.createIndex('email', 'email', { unique: true })
    
    const settingsStore = db.createObjectStore('settings', { keyPath: 'key' })
  }
})

// æ·»åŠ æ•°æ®
const transaction = db.transaction(['users'], 'readwrite')
const userStore = transaction.objectStore('users')
await userStore.add({
  id: 1,
  name: 'John Doe',
  email: 'john@example.com',
  createdAt: new Date()
})

// æŸ¥è¯¢æ•°æ®
const user = await userStore.get(1)
const userByEmail = await userStore.index('email').get('john@example.com')

// æ›´æ–°æ•°æ®
await userStore.put({
  id: 1,
  name: 'John Smith',
  email: 'john@example.com',
  updatedAt: new Date()
})

// åˆ é™¤æ•°æ®
await userStore.delete(1)
```

### æ–‡ä»¶å­˜å‚¨

```typescript
// æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼ˆéœ€è¦ filesystem æƒé™ï¼‰
const fs = sdk.filesystem

// è¯»å–æ–‡ä»¶
const content = await fs.readFile('/app-data/config.json')
const config = JSON.parse(content)

// å†™å…¥æ–‡ä»¶
const newConfig = { ...config, updated: true }
await fs.writeFile('/app-data/config.json', JSON.stringify(newConfig, null, 2))

// åˆ›å»ºç›®å½•
await fs.createDirectory('/app-data/cache')

// åˆ—å‡ºç›®å½•å†…å®¹
const files = await fs.readDirectory('/app-data')

// åˆ é™¤æ–‡ä»¶
await fs.deleteFile('/app-data/temp.txt')

// åˆ é™¤ç›®å½•
await fs.deleteDirectory('/app-data/cache')

// æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
const exists = await fs.exists('/app-data/config.json')

// è·å–æ–‡ä»¶ä¿¡æ¯
const stats = await fs.stat('/app-data/config.json')
console.log('File size:', stats.size)
console.log('Modified:', stats.mtime)
```

## ğŸ“¦ åº”ç”¨æ‰“åŒ…

### æ„å»ºé…ç½®

```javascript
// vite.config.js
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { resolve } from 'path'

export default defineConfig({
  plugins: [vue()],
  build: {
    lib: {
      entry: resolve(__dirname, 'src/App.vue'),
      name: 'MyApp',
      fileName: 'my-app',
      formats: ['es', 'umd']
    },
    rollupOptions: {
      external: ['vue'],
      output: {
        globals: {
          vue: 'Vue'
        }
      }
    },
    outDir: 'dist',
    sourcemap: true,
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true,
        drop_debugger: true
      }
    }
  },
  resolve: {
    alias: {
      '@': resolve(__dirname, 'src')
    }
  }
})
```

### æ‰“åŒ…è„šæœ¬

```javascript
// scripts/build.js
const { build } = require('vite')
const { createHash } = require('crypto')
const fs = require('fs-extra')
const path = require('path')
const archiver = require('archiver')

class AppBuilder {
  constructor() {
    this.buildDir = 'dist'
    this.packageDir = 'packages'
  }
  
  async build() {
    console.log('Building application...')
    
    // æ¸…ç†æ„å»ºç›®å½•
    await fs.emptyDir(this.buildDir)
    
    // æ‰§è¡Œ Vite æ„å»º
    await build()
    
    // å¤åˆ¶èµ„æºæ–‡ä»¶
    await this.copyAssets()
    
    // ç”Ÿæˆæ¸…å•æ–‡ä»¶
    await this.generateManifest()
    
    // åˆ›å»ºåº”ç”¨åŒ…
    await this.createPackage()
    
    console.log('Build completed successfully!')
  }
  
  async copyAssets() {
    console.log('Copying assets...')
    
    // å¤åˆ¶å›¾æ ‡å’Œæˆªå›¾
    await fs.copy('assets', path.join(this.buildDir, 'assets'))
    
    // å¤åˆ¶è„šæœ¬æ–‡ä»¶
    await fs.copy('scripts', path.join(this.buildDir, 'scripts'))
    
    // å¤åˆ¶æ¸…å•æ–‡ä»¶
    await fs.copy('app.manifest.json', path.join(this.buildDir, 'app.manifest.json'))
    
    // å¤åˆ¶è¯´æ˜æ–‡æ¡£
    await fs.copy('README.md', path.join(this.buildDir, 'README.md'))
    await fs.copy('LICENSE', path.join(this.buildDir, 'LICENSE'))
  }
  
  async generateManifest() {
    console.log('Generating build manifest...')
    
    const manifest = {
      buildTime: new Date().toISOString(),
      buildVersion: process.env.BUILD_VERSION || '1.0.0',
      files: await this.getFileHashes(),
      size: await this.calculateTotalSize()
    }
    
    await fs.writeJson(
      path.join(this.buildDir, 'build.manifest.json'),
      manifest,
      { spaces: 2 }
    )
  }
  
  async getFileHashes() {
    const files = {}
    const fileList = await this.getAllFiles(this.buildDir)
    
    for (const file of fileList) {
      const content = await fs.readFile(file)
      const hash = createHash('sha256').update(content).digest('hex')
      const relativePath = path.relative(this.buildDir, file)
      files[relativePath] = hash
    }
    
    return files
  }
  
  async getAllFiles(dir) {
    const files = []
    const items = await fs.readdir(dir)
    
    for (const item of items) {
      const fullPath = path.join(dir, item)
      const stat = await fs.stat(fullPath)
      
      if (stat.isDirectory()) {
        files.push(...await this.getAllFiles(fullPath))
      } else {
        files.push(fullPath)
      }
    }
    
    return files
  }
  
  async calculateTotalSize() {
    const files = await this.getAllFiles(this.buildDir)
    let totalSize = 0
    
    for (const file of files) {
      const stat = await fs.stat(file)
      totalSize += stat.size
    }
    
    return totalSize
  }
  
  async createPackage() {
    console.log('Creating application package...')
    
    await fs.ensureDir(this.packageDir)
    
    const packageName = `my-app-${process.env.BUILD_VERSION || '1.0.0'}.bgapp`
    const packagePath = path.join(this.packageDir, packageName)
    
    const output = fs.createWriteStream(packagePath)
    const archive = archiver('zip', { zlib: { level: 9 } })
    
    return new Promise((resolve, reject) => {
      output.on('close', () => {
        console.log(`Package created: ${packagePath} (${archive.pointer()} bytes)`)
        resolve(packagePath)
      })
      
      archive.on('error', reject)
      archive.pipe(output)
      archive.directory(this.buildDir, false)
      archive.finalize()
    })
  }
}

// æ‰§è¡Œæ„å»º
if (require.main === module) {
  const builder = new AppBuilder()
  builder.build().catch(console.error)
}

module.exports = AppBuilder
```

### å‘å¸ƒè„šæœ¬

```bash
#!/bin/bash
# scripts/publish.sh

set -e

echo "Publishing My App..."

# æ£€æŸ¥ç¯å¢ƒå˜é‡
if [ -z "$APP_STORE_TOKEN" ]; then
  echo "Error: APP_STORE_TOKEN is required"
  exit 1
fi

# æ„å»ºåº”ç”¨
echo "Building application..."
npm run build

# è¿è¡Œæµ‹è¯•
echo "Running tests..."
npm test

# åˆ›å»ºåº”ç”¨åŒ…
echo "Creating package..."
node scripts/build.js

# ä¸Šä¼ åˆ°åº”ç”¨å•†åº—
echo "Uploading to app store..."
curl -X POST \
  -H "Authorization: Bearer $APP_STORE_TOKEN" \
  -H "Content-Type: multipart/form-data" \
  -F "package=@packages/my-app-1.0.0.bgapp" \
  -F "manifest=@dist/app.manifest.json" \
  https://store.bg-webmacos.com/api/apps/upload

echo "Publish completed!"
```

## ğŸª åº”ç”¨å•†åº—å‘å¸ƒ

### åº”ç”¨å•†åº— API

```typescript
// åº”ç”¨å•†åº—å®¢æˆ·ç«¯
class AppStoreClient {
  constructor(private apiKey: string) {}
  
  async uploadApp(packagePath: string, manifest: any) {
    const formData = new FormData()
    formData.append('package', fs.createReadStream(packagePath))
    formData.append('manifest', JSON.stringify(manifest))
    
    const response = await fetch('https://store.bg-webmacos.com/api/apps/upload', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.apiKey}`
      },
      body: formData
    })
    
    if (!response.ok) {
      throw new Error(`Upload failed: ${response.statusText}`)
    }
    
    return response.json()
  }
  
  async updateApp(appId: string, packagePath: string) {
    const formData = new FormData()
    formData.append('package', fs.createReadStream(packagePath))
    
    const response = await fetch(`https://store.bg-webmacos.com/api/apps/${appId}/update`, {
      method: 'PUT',
      headers: {
        'Authorization': `Bearer ${this.apiKey}`
      },
      body: formData
    })
    
    return response.json()
  }
  
  async getAppStatus(appId: string) {
    const response = await fetch(`https://store.bg-webmacos.com/api/apps/${appId}/status`, {
      headers: {
        'Authorization': `Bearer ${this.apiKey}`
      }
    })
    
    return response.json()
  }
}
```

### å‘å¸ƒæµç¨‹

1. **å¼€å‘è€…æ³¨å†Œ**
   - åœ¨åº”ç”¨å•†åº—æ³¨å†Œå¼€å‘è€…è´¦å·
   - è·å– API å¯†é’¥
   - å®Œå–„å¼€å‘è€…ä¿¡æ¯

2. **åº”ç”¨æäº¤**
   - ä¸Šä¼ åº”ç”¨åŒ…æ–‡ä»¶
   - å¡«å†™åº”ç”¨ä¿¡æ¯
   - æä¾›åº”ç”¨æˆªå›¾
   - è®¾ç½®ä»·æ ¼å’Œåˆ†å‘ç­–ç•¥

3. **å®¡æ ¸æµç¨‹**
   - è‡ªåŠ¨å®‰å…¨æ‰«æ
   - åŠŸèƒ½æµ‹è¯•
   - äººå·¥å®¡æ ¸
   - å®¡æ ¸ç»“æœé€šçŸ¥

4. **å‘å¸ƒä¸Šçº¿**
   - å®¡æ ¸é€šè¿‡åè‡ªåŠ¨ä¸Šçº¿
   - ç”¨æˆ·å¯ä»¥æœç´¢å’Œå®‰è£…
   - å¼€å‘è€…å¯ä»¥æŸ¥çœ‹ä¸‹è½½ç»Ÿè®¡

## ğŸ¯ æœ€ä½³å®è·µ

### æ€§èƒ½ä¼˜åŒ–

1. **ä»£ç åˆ†å‰²**
```typescript
// ä½¿ç”¨åŠ¨æ€å¯¼å…¥è¿›è¡Œä»£ç åˆ†å‰²
const LazyComponent = defineAsyncComponent(() => import('./components/HeavyComponent.vue'))

// è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²
const routes = [
  {
    path: '/feature',
    component: () => import('./views/FeatureView.vue')
  }
]
```

2. **èµ„æºä¼˜åŒ–**
```typescript
// å›¾ç‰‡æ‡’åŠ è½½
const useImageLazyLoad = () => {
  const imageRef = ref<HTMLImageElement>()
  
  onMounted(() => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const img = entry.target as HTMLImageElement
          img.src = img.dataset.src!
          observer.unobserve(img)
        }
      })
    })
    
    if (imageRef.value) {
      observer.observe(imageRef.value)
    }
  })
  
  return { imageRef }
}
```

3. **å†…å­˜ç®¡ç†**
```typescript
// æ¸…ç†å®šæ—¶å™¨å’Œäº‹ä»¶ç›‘å¬
onUnmounted(() => {
  // æ¸…ç†å®šæ—¶å™¨
  if (timer) {
    clearInterval(timer)
  }
  
  // ç§»é™¤äº‹ä»¶ç›‘å¬
  sdk.events.off('window:resize', handleResize)
  
  // æ¸…ç† WebSocket è¿æ¥
  if (websocket) {
    websocket.close()
  }
})
```

### é”™è¯¯å¤„ç†

```typescript
// å…¨å±€é”™è¯¯å¤„ç†
const app = createApp(App)

app.config.errorHandler = (error, instance, info) => {
  console.error('Global error:', error)
  console.error('Component instance:', instance)
  console.error('Error info:', info)
  
  // å‘é€é”™è¯¯æŠ¥å‘Š
  sdk.system.reportError({
    error: error.message,
    stack: error.stack,
    component: instance?.$options.name,
    info
  })
}

// å¼‚æ­¥é”™è¯¯å¤„ç†
const handleAsyncOperation = async () => {
  try {
    const result = await riskyOperation()
    return result
  } catch (error) {
    console.error('Async operation failed:', error)
    
    // æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
    await sdk.system.showNotification({
      title: 'Operation Failed',
      message: 'Please try again later',
      type: 'error'
    })
    
    throw error
  }
}
```

### å®‰å…¨æœ€ä½³å®è·µ

```typescript
// è¾“å…¥éªŒè¯
const validateInput = (input: string): boolean => {
  // é˜²æ­¢ XSS æ”»å‡»
  const sanitized = input.replace(/<script[^>]*>.*?<\/script>/gi, '')
  
  // é•¿åº¦é™åˆ¶
  if (sanitized.length > 1000) {
    return false
  }
  
  // ç‰¹æ®Šå­—ç¬¦æ£€æŸ¥
  const dangerousChars = /[<>"'&]/
  if (dangerousChars.test(sanitized)) {
    return false
  }
  
  return true
}

// å®‰å…¨çš„æ•°æ®å­˜å‚¨
const secureStorage = {
  async setItem(key: string, value: any) {
    // åŠ å¯†æ•æ„Ÿæ•°æ®
    const encrypted = await sdk.crypto.encrypt(JSON.stringify(value))
    await sdk.storage.setItem(key, encrypted)
  },
  
  async getItem(key: string) {
    const encrypted = await sdk.storage.getItem(key)
    if (!encrypted) return null
    
    // è§£å¯†æ•°æ®
    const decrypted = await sdk.crypto.decrypt(encrypted)
    return JSON.parse(decrypted)
  }
}
```

### ç”¨æˆ·ä½“éªŒ

```typescript
// åŠ è½½çŠ¶æ€ç®¡ç†
const useLoading = () => {
  const loading = ref(false)
  const error = ref<string | null>(null)
  
  const execute = async <T>(operation: () => Promise<T>): Promise<T | null> => {
    loading.value = true
    error.value = null
    
    try {
      const result = await operation()
      return result
    } catch (err) {
      error.value = err instanceof Error ? err.message : 'Unknown error'
      return null
    } finally {
      loading.value = false
    }
  }
  
  return { loading, error, execute }
}

// å“åº”å¼è®¾è®¡
const useResponsive = () => {
  const windowWidth = ref(window.innerWidth)
  const windowHeight = ref(window.innerHeight)
  
  const updateSize = () => {
    windowWidth.value = window.innerWidth
    windowHeight.value = window.innerHeight
  }
  
  onMounted(() => {
    window.addEventListener('resize', updateSize)
  })
  
  onUnmounted(() => {
    window.removeEventListener('resize', updateSize)
  })
  
  const isMobile = computed(() => windowWidth.value < 768)
  const isTablet = computed(() => windowWidth.value >= 768 && windowWidth.value < 1024)
  const isDesktop = computed(() => windowWidth.value >= 1024)
  
  return {
    windowWidth,
    windowHeight,
    isMobile,
    isTablet,
    isDesktop
  }
}
```

## ğŸ“š ç¤ºä¾‹åº”ç”¨

### è®¡ç®—å™¨åº”ç”¨
ä½äº `example-apps/calculator/` ç›®å½•ï¼Œå±•ç¤ºäº†ï¼š
- å®Œæ•´çš„åº”ç”¨ç»“æ„
- Vue 3 ç»„åˆå¼ API ä½¿ç”¨
- æ•°å­¦è®¡ç®—å¼•æ“å®ç°
- æœ¬åœ°æ•°æ®å­˜å‚¨
- é”®ç›˜äº‹ä»¶å¤„ç†
- ç”Ÿå‘½å‘¨æœŸè„šæœ¬

### æ–‡æœ¬ç¼–è¾‘å™¨åº”ç”¨
```typescript
// ç®€å•çš„æ–‡æœ¬ç¼–è¾‘å™¨ç¤ºä¾‹
<template>
  <div class="text-editor">
    <div class="toolbar">
      <button @click="newFile">æ–°å»º</button>
      <button @click="openFile">æ‰“å¼€</button>
      <button @click="saveFile">ä¿å­˜</button>
      <button @click="saveAsFile">å¦å­˜ä¸º</button>
    </div>
    
    <textarea 
      v-model="content"
      class="editor-content"
      @input="handleInput"
      @keydown="handleKeydown"
    ></textarea>
    
    <div class="status-bar">
      <span>è¡Œ: {{ currentLine }}</span>
      <span>åˆ—: {{ currentColumn }}</span>
      <span>å­—ç¬¦: {{ content.length }}</span>
      <span v-if="isDirty">*</span>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue'
import { useAppSDK } from '@/sdk'

const sdk = useAppSDK()
const content = ref('')
const currentFile = ref<string | null>(null)
const isDirty = ref(false)
const cursorPosition = ref(0)

const currentLine = computed(() => {
  const lines = content.value.substring(0, cursorPosition.value).split('\n')
  return lines.length
})

const currentColumn = computed(() => {
  const lines = content.value.substring(0, cursorPosition.value).split('\n')
  return lines[lines.length - 1].length + 1
})

const newFile = () => {
  if (isDirty.value) {
    // è¯¢é—®æ˜¯å¦ä¿å­˜å½“å‰æ–‡ä»¶
    confirmSave(() => {
      content.value = ''
      currentFile.value = null
      isDirty.value = false
    })
  } else {
    content.value = ''
    currentFile.value = null
    isDirty.value = false
  }
}

const openFile = async () => {
  try {
    const file = await sdk.filesystem.openFileDialog({
      filters: [{ name: 'Text Files', extensions: ['txt', 'md'] }]
    })
    
    if (file) {
      const fileContent = await sdk.filesystem.readFile(file.path)
      content.value = fileContent
      currentFile.value = file.path
      isDirty.value = false
      
      sdk.window.setTitle(`Text Editor - ${file.name}`)
    }
  } catch (error) {
    console.error('Failed to open file:', error)
  }
}

const saveFile = async () => {
  if (currentFile.value) {
    await sdk.filesystem.writeFile(currentFile.value, content.value)
    isDirty.value = false
  } else {
    await saveAsFile()
  }
}

const saveAsFile = async () => {
  try {
    const file = await sdk.filesystem.saveFileDialog({
      defaultName: 'untitled.txt',
      filters: [{ name: 'Text Files', extensions: ['txt', 'md'] }]
    })
    
    if (file) {
      await sdk.filesystem.writeFile(file.path, content.value)
      currentFile.value = file.path
      isDirty.value = false
      
      sdk.window.setTitle(`Text Editor - ${file.name}`)
    }
  } catch (error) {
    console.error('Failed to save file:', error)
  }
}

const handleInput = (event: Event) => {
  isDirty.value = true
  cursorPosition.value = (event.target as HTMLTextAreaElement).selectionStart
}

const handleKeydown = (event: KeyboardEvent) => {
  // Ctrl+S ä¿å­˜
  if (event.ctrlKey && event.key === 's') {
    event.preventDefault()
    saveFile()
  }
  
  // Ctrl+N æ–°å»º
  if (event.ctrlKey && event.key === 'n') {
    event.preventDefault()
    newFile()
  }
  
  // Ctrl+O æ‰“å¼€
  if (event.ctrlKey && event.key === 'o') {
    event.preventDefault()
    openFile()
  }
}

const confirmSave = (callback: () => void) => {
  sdk.system.showDialog({
    title: 'ä¿å­˜æ–‡ä»¶',
    message: 'å½“å‰æ–‡ä»¶å·²ä¿®æ”¹ï¼Œæ˜¯å¦ä¿å­˜ï¼Ÿ',
    buttons: ['ä¿å­˜', 'ä¸ä¿å­˜', 'å–æ¶ˆ']
  }).then(result => {
    if (result === 'ä¿å­˜') {
      saveFile().then(callback)
    } else if (result === 'ä¸ä¿å­˜') {
      callback()
    }
    // å–æ¶ˆåˆ™ä¸æ‰§è¡Œä»»ä½•æ“ä½œ
  })
}

onMounted(() => {
  sdk.window.setTitle('Text Editor')
})
</script>
```

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•è°ƒè¯•åº”ç”¨ï¼Ÿ
A: ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼Œå¯ç”¨ Vue DevToolsï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ã€‚

### Q: åº”ç”¨å¦‚ä½•ä¸ç³»ç»Ÿé€šä¿¡ï¼Ÿ
A: é€šè¿‡ App SDK æä¾›çš„ API æ¥å£è¿›è¡Œé€šä¿¡ã€‚

### Q: å¦‚ä½•å¤„ç†åº”ç”¨æƒé™ï¼Ÿ
A: åœ¨åº”ç”¨æ¸…å•ä¸­å£°æ˜æ‰€éœ€æƒé™ï¼Œåœ¨è¿è¡Œæ—¶é€šè¿‡ SDK è¯·æ±‚æƒé™ã€‚

### Q: åº”ç”¨æ•°æ®å¦‚ä½•æŒä¹…åŒ–ï¼Ÿ
A: ä½¿ç”¨ SDK æä¾›çš„å­˜å‚¨ APIï¼Œæ”¯æŒé”®å€¼å­˜å‚¨ã€æ•°æ®åº“å­˜å‚¨å’Œæ–‡ä»¶å­˜å‚¨ã€‚

### Q: å¦‚ä½•å®ç°åº”ç”¨é—´é€šä¿¡ï¼Ÿ
A: é€šè¿‡ç³»ç»Ÿäº‹ä»¶æ€»çº¿æˆ–å…±äº«å­˜å‚¨å®ç°åº”ç”¨é—´æ•°æ®äº¤æ¢ã€‚

### Q: åº”ç”¨å¦‚ä½•å¤„ç†å¤šè¯­è¨€ï¼Ÿ
A: ä½¿ç”¨ Vue I18n æˆ–ç±»ä¼¼çš„å›½é™…åŒ–åº“ï¼Œé…åˆç³»ç»Ÿè¯­è¨€è®¾ç½®ã€‚

### Q: å¦‚ä½•ä¼˜åŒ–åº”ç”¨æ€§èƒ½ï¼Ÿ
A: ä½¿ç”¨ä»£ç åˆ†å‰²ã€æ‡’åŠ è½½ã€è™šæ‹Ÿæ»šåŠ¨ç­‰æŠ€æœ¯ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚

### Q: åº”ç”¨æ›´æ–°å¦‚ä½•å¤„ç†ï¼Ÿ
A: é€šè¿‡åº”ç”¨å•†åº—è‡ªåŠ¨æ›´æ–°ï¼Œæˆ–å®ç°è‡ªå®šä¹‰æ›´æ–°æ£€æŸ¥æœºåˆ¶ã€‚

### Q: å¦‚ä½•æµ‹è¯•åº”ç”¨ï¼Ÿ
A: ä½¿ç”¨ Vitest è¿›è¡Œå•å…ƒæµ‹è¯•ï¼ŒCypress è¿›è¡Œ E2E æµ‹è¯•ã€‚

### Q: åº”ç”¨å¦‚ä½•å¤„ç†é”™è¯¯ï¼Ÿ
A: å®ç°å…¨å±€é”™è¯¯å¤„ç†ï¼Œè®°å½•é”™è¯¯æ—¥å¿—ï¼Œå‘ç”¨æˆ·æ˜¾ç¤ºå‹å¥½æç¤ºã€‚

### Q: å¦‚ä½•å‘å¸ƒåº”ç”¨åˆ°å•†åº—ï¼Ÿ
A: æ„å»ºåº”ç”¨åŒ…ï¼Œé€šè¿‡å¼€å‘è€…æ§åˆ¶å°ä¸Šä¼ ï¼Œç­‰å¾…å®¡æ ¸é€šè¿‡ã€‚

### Q: åº”ç”¨å¦‚ä½•è·å¾—æ›´å¤šæ›å…‰ï¼Ÿ
A: ä¼˜åŒ–åº”ç”¨æè¿°å’Œå…³é”®è¯ï¼Œæä¾›é«˜è´¨é‡æˆªå›¾ï¼Œç§¯æå“åº”ç”¨æˆ·åé¦ˆã€‚

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **å®˜æ–¹æ–‡æ¡£**: https://docs.bg-webmacos.com
- **å¼€å‘è€…è®ºå›**: https://forum.bg-webmacos.com
- **GitHub ä»“åº“**: https://github.com/BG-WebMacOS
- **æŠ€æœ¯æ”¯æŒ**: support@bg-webmacos.com
- **å¼€å‘è€… QQ ç¾¤**: 123456789

## ğŸ‰ ç»“è¯­

æ­å–œä½ å®Œæˆäº† BG-WebMacOS åº”ç”¨å¼€å‘æŒ‡å—çš„å­¦ä¹ ï¼ç°åœ¨ä½ å·²ç»å…·å¤‡äº†å¼€å‘é«˜è´¨é‡åº”ç”¨çš„çŸ¥è¯†å’ŒæŠ€èƒ½ã€‚

è®°ä½ä»¥ä¸‹å‡ ä¸ªå…³é”®ç‚¹ï¼š
- å§‹ç»ˆå…³æ³¨ç”¨æˆ·ä½“éªŒ
- éµå¾ªå®‰å…¨æœ€ä½³å®è·µ
- ä¿æŒä»£ç ç®€æ´å’Œå¯ç»´æŠ¤
- ç§¯æå‚ä¸ç¤¾åŒºäº¤æµ
- æŒç»­å­¦ä¹ æ–°æŠ€æœ¯

ç¥ä½ åœ¨ BG-WebMacOS å¹³å°ä¸Šå¼€å‘å‡ºä¼˜ç§€çš„åº”ç”¨ï¼ğŸš€

---

*æœ¬æŒ‡å—ä¼šæŒç»­æ›´æ–°ï¼Œè¯·å…³æ³¨æœ€æ–°ç‰ˆæœ¬ã€‚*